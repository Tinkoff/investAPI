####[Что такое Figi инструмента?](#1.1)  
####[Как мне найти Figi инструмента по его названию, тикеру или isin?](#1.2)  
####[Что такое class_code и где его найти?](#1.3)  
####[Как понять, что бумага доступна для торговли через TINKOFF INVEST API?](#1.4)  
####[Что такое накопленный купонный доход облигации и как его узнать?](#1.5)  
####[Как узнать стоимость шага цены  (min_price_increment_amount) фьючерса?](#1.6)  
####[Как узнать на какой бирже исполняются расчеты по инструменту?](#1.7)  
####[Как найти базовый актив фьючерса?](#1.8)  
####[Как отличить инструмент доступный для ИИС?](#1.9)  
####[Как получить информацию об брендах?](#1.10)  
####[Как по позиции найти инструмент?](#1.11)  
####[Ставки риска и их коэфффиценты](#1.12)  
####[Как узнать торгуется ли инструмент на выходных?](#1.13)  
####[Какие заявки по опционам возможно выставить?](#1.14)  
####[Что такое liquidity_flag?](#1.15)  

###Что такое Figi инструмента?<a id="1.1"></a>

**FIGI**(*англ.:* Financial Instrument Global Identifier) — глобальный идентификатор
финансового инструмента. Представляет собой 12-символьный код из латинских букв и цифр,
определяется как идентификатор ценной бумаги на торговой площадке (бирже), которая
является некоторым *"источником цен"*.

Нужно понимать, что не все инструменты, доступные в Тинькофф Инвестициях, имеют общепринятый
Figi. Поэтому не гарантируется уникальность инструментов с другими источниками. Узнать актуальный
Figi-идентификатор инструмента можно при помощи методов [сервиса инструментов](/investAPI/instruments/).

 
**На данный момент основным идентификатором внутри Тинькофф Инвестиций является uid, который позволяет избежать возможной путаницы.**

###Как мне найти Figi инструмента по его названию, тикеру или isin?<a id="1.2"></a>

Методы поиска инструментов по идентификатору ([BondBy](/investAPI/instruments#bondby), 
[CurrencyBy](/investAPI/instruments#currencyby), [EtfBy](/investAPI/instruments#etfby), 
[FutureBy](/instruments#futureby), [ShareBy](/investAPI/instruments#shareby)) позволяют получить 
информацию об инструменте зная его Figi или связку ticker + class_code. Если же эти идентификаторы
вам неизвестны, вы можете получить полный список инструментов определённого типа методами запроса
списков инструментов ([Bonds](/investAPI/instruments#bonds),
[Currencies](/investAPI/instruments#currencies), [Etfs](/investAPI/instruments#etfs),
[Futures](/instruments#futures), [Shares](/investAPI/instruments#shares)) и выполнить поиск по известным
параметрам самостоятельно. Сделать это можно в коде робота или при помощи любого доступного gRPC-клиента,
например, Kreya. Инструкция по настройке Kreya доступна по [ссылке](/investAPI/grpc#kreya).

###Что такое class_code и где его найти?<a id="1.3"></a>

Сlass_code — это технический параметр "Режим торгов", используемый для обозначения секции биржи, на
которой торгуется данный инструмент. Узнать его можно, получив детали по инструменту методами сервиса
инструментов.

###Как понять, что бумага доступна для торговли через TINKOFF INVEST API?<a id="1.4"></a>

Чтобы получить все доступные для торговли инструменты определённого типа можно воспользоваться
соответствующими методами, передав параметр **instrument_status** = ***INSTRUMENT_STATUS_BASE***: 
* [Bonds](/investAPI/instruments#bonds)
* [Currencies](/investAPI/instruments#currencies)
* [Etfs](/investAPI/instruments#etfs)
* [Futures](/instruments#futures)
* [Shares](/investAPI/instruments#shares)

Если же нет необходимости получать полный список инструментов, можно использовать параметр
**api_trade_available_flag** из ответа метода получения инструмента по его идентификатору 
([BondBy](/investAPI/instruments#bondby),
[CurrencyBy](/investAPI/instruments#currencyby), [EtfBy](/investAPI/instruments#etfby),
[FutureBy](/instruments#futureby), [ShareBy](/investAPI/instruments#shareby)). Этот флаг
отвечает за доступность инструмента для торгов через TINKOFF INVEST API.

Кроме того следует учитывать расписание работы бирж и торговый статус инструмента. Подробнее:
[Торговые статусы инструментов и расписание торгов](/investAPI/faq_trading_status/).

###Что такое накопленный купонный доход облигации и как его узнать? <a id="1.5"></a>

**Купон, или купонный доход** — это процентные выплаты держателям облигаций со стороны эмитента, то есть
компании или госоргана, выпустивших этот тип ценных бумаг.
Даты выплат процентов по облигациям и размер купона известны заранее. Размер купона задается в процентах от
номинала — то есть от цены облигации при ее выпуске. Величина купона может быть фиксированной или плавающей —
то есть привязанной к инфляции, ключевой ставке Центробанка России или другим ориентирам. Иногда у облигации
может вовсе не быть купона. [Купонный доход по облигациям](https://www.tinkoff.ru/invest/account/help/get-profit/coupon-yield).

Получить календарь купонных выплат можно методом [GetAccruedInterests](/investAPI/instruments#getaccruedinterests).

###Как узнать стоимость шага цены(min_price_increment_amount) фьючерса? <a id="1.6"></a>

Данный параметр может изменяться довольно часто в течении дня, поэтому для его получения существует 
отдельный метод сервиса инструментов [GetFuturesMargin](/investAPI/instruments#getfuturesmargin).

###Как узнать на какой бирже исполняются расчеты по инструменту? <a id="1.7"></a>

Для определения биржи на которой исполняются расчеты по финансовому инструменту в TINKOFF INVEST API добавлен параметр [real_exchange](/investAPI/instruments/#realexchange).

Список методов возвращающих в ответе биржу на которой исполняются расчеты:

* [GetInstrumentBy](/investAPI/instruments/#getinstrumentby) - Метод получения основной информации об инструменте.
* [GetBondBy](/investAPI/instruments/#bondby) - Метод получения облигации по её идентификатору.
* [GetBonds](/investAPI/instruments/#bonds) - Метод получения списка облигаций.
* [GetShareBy](/investAPI/instruments/#shareby) - Метод получения акции по её идентификатору.
* [GetShares](/investAPI/instruments/#shares) - Метод получения списка акций.
* [GetEtfBy](/investAPI/instruments/#etfby) - Метод получения инвестиционного фонда по его идентификатору.
* [GetEtfs](/investAPI/instruments/#etfs) - Метод получения списка инвестиционных фондов.
* [GetFutureBy](/investAPI/instruments/#futureby) - Метод получения фьючерса по его идентификатору.
* [GetFutures](/investAPI/instruments/#futures) - Метод получения списка фьючерсов.
* [GetCurrencyBy](/investAPI/instruments/#currencyby) - Метод получения валюты по её идентификатору.
* [GetCurrencies](/investAPI/instruments/#currencies) - Метод получения списка валют.
* [GetOptionBy](/investAPI/instruments/#optionby) - Метод получения опциона по его идентификатору.
* [GetOptions](/investAPI/instruments/#options) - Метод получения опционов.


###Как найти базовый актив фьючерса? <a id="1.8"></a>

Используя метод [FindInstrument](/investAPI/instruments/#findinstrument) можно найти базовый актив фьючерса. Для этого достаточно передать в query значение параметра *basic_asset_position_uid*, возвращаемое методами [GetFutureBy](/investAPI/instruments/#futureby) и [GetFutures](/investAPI/instruments/#futures).

###Как получить и изменить список избранных инструментов?

Используя метод [GetFavorites](/investAPI/instruments#getfavorites) можно получить список избранных инструментов клиента.
Данный метод может использоваться разработчиками для получения списка инструментов, которые робот добавил в избранное используя метод [EditFavorites](/investAPI/instruments#editfavorites).

Для добавления или удаления инструментов из списка избранных можно использовать [EditFavorites](/investAPI/instruments#editfavorites).
Данный метод позволяет разработчикам автоматизировать выделение наиболее интересных инструментов путем редактирования списка избранных инструментов.
Использование метода ограничено 100 инструментов. При попытке передать больше 100 инструментов будет возвращена ошибка "code":"30091" и "message":"quantity of instruments can't be more than 100".

**Важно!!!** Если вы хотите добавить в список избранных инструментов валюту, то это необходимо делать через валюту с лотностью = 1.  
Инструменты валюты с разной лотностью имеют разные значения идентификаторов.
Например, 

* FIGI доллара США с **лотностью 1000** - TCS0013HGFT4, а FIGI доллара США с **лотностью 1** - USD000UTSTOM.
* FIGI евро с **лотностью 1000** - BBG0013HJJ31, а FIGI доллара США с **лотностью 1** - EUR000UTSTOM.

###Как отличить инструмент доступный для ИИС? <a id="1.9"></a>

В методах получения информации об инструментах добавлен флаг `For_iis_flag` принимающий булево значение в зависимости от доступности инструмента для ИИС.

###Как получить информацию об активах?

В TINKOFF INVEST API представлены два метода для получения активов.

Используя метод [getAssets](/investAPI/instruments/#getassets) сервиса инструментов можно получить список всех активов. Метод работает для всех инструментов, за исключением срочных - опционов и фьючерсов.

Используя метод [getAssetBy](/investAPI/instruments/#getassetby) сервиса инструментов можно найти актив по его идентификатору.
Этот метод возвращает более подробную информацию о запрошенном активе. Набор данных отличается в зависимости от типа актива.


###Как получить информацию об брендах?<a id="1.10"></a>

В TINKOFF INVEST API представлены два метода для получения брендов.

Используя метод [getBrands](/investAPI/instruments/#getbrands) сервиса инструментов можно получить список всех брендов.

Используя метод [getBrandBy](/investAPI/instruments/#getbrandby) сервиса инструментов можно найти бренд по его идентификатору.

###Как по позиции найти инструмент? <a id="1.11"></a>

Для поиска инструмента по идентификатору позиции (Position_uid) добавлен тип идентификатора инструмента - INSTRUMENT_ID_TYPE_POSITION_UID.

Использовать `id_type = INSTRUMENT_ID_TYPE_POSITION_UID` можно методах:

* [GetInstrumentBy](/investAPI/instruments/#getinstrumentby) - Метод получения основной информации об инструменте.
* [GetBondBy](/investAPI/instruments/#bondby) - Метод получения облигации по её идентификатору.
* [GetShareBy](/investAPI/instruments/#shareby) - Метод получения акции по её идентификатору.
* [GetEtfBy](/investAPI/instruments/#etfby) - Метод получения инвестиционного фонда по его идентификатору.
* [GetFutureBy](/investAPI/instruments/#futureby) - Метод получения фьючерса по его идентификатору.
* [GetOptionBy](/investAPI/instruments/#optionby) - Метод получения опциона по его идентификатору.
* [GetCurrencyBy](/investAPI/instruments/#currencyby) - Метод получения валюты по её идентификатору.

###Ставки риска и их коэфффиценты <a id="1.12"></a>

Чтобы лучше понять тему, вы можете ознакомиться с материалами, указанными в ссылках. Здесь же мы приведем лишь краткое определения и раскроем суть параметров.

**Ставка риска** — это показатель, который брокер использует для расчета суммы, которую вам нужно иметь на счете, чтобы открыть или поддерживать непокрытую позицию. Чем ниже ставка риска, тем крупнее может быть непокрытая позиция — то есть брокер будет готов одолжить больше активов. И наоборот — с высокой ставкой риска размер кредитного плеча в сделке будет небольшим или его не будет вовсе. Больше о [ставках риска](https://www.tinkoff.ru/invest/help/brokerage/account/margin/about/#q5).

**Стандартный и повышенный уровни риска**. Клиенты российских брокеров — физические лица — делятся на две категории: клиенты со стандартным уровнем риска (**КСУР**) и клиенты с повышенным уровнем риска (**КПУР**). Клиентам со стандартным уровнем доступно меньшее **кредитное плечо**, чем КПУР.

**Кредитное плечо** — это беспроцентный заем, который брокер предоставляет инвестору для совершения сделок на более крупные суммы. Это соотношение между собственными средствами трейдера и заемными деньгами, предоставляемыми брокером или дилинговым центром на специальных условиях.

**Начальная маржа** — это стоимость всех ликвидных активов и фьючерсов в портфеле инвестора, приведенная к рублям по биржевому курсу и умноженная на ставки риска этих активов

**Скорректированная маржа** — это показатель, аналогичный начальной марже, но при этом учитывающий выставленные вами лимитные заявки на увеличение позиции (на любую покупку или на продажу в шорт).

**Минимальная маржа** — это половина от начальной или скорректированной маржи портфеля.

**Лонг, или длинная позиция**, — это сделка по покупке актива, когда инвестор ожидает роста его цены. Если инвесторы хотят заработать на растущем рынке, они торгуют в лонг. [Как торговать в шорт?](https://www.tinkoff.ru/invest/help/brokerage/account/margin/long/)

**Шорт или короткая позиция**, - это сделка по продаже полученного в долг актива с целью через некоторое время выкупить его дешевле и заработать на разнице цен. Когда инвесторы хотят получить прибыль за счет снижения стоимости актива, они торгуют в шорт (также известен как «игра на понижение» или «непокрытая продажа»). [Как торговать в шорт?](https://www.tinkoff.ru/invest/help/brokerage/account/margin/short/)


В методе сервиса инструментов в методах есть ряд параметров, связанных со ставками риска:

**klong** - Коэффициент ставки риска длинной позиции по клиенту. 2 – клиент со стандартным уровнем риска (КСУР). 1 – клиент с повышенным уровнем риска (КПУР).
**kshort** - Коэффициент ставки риска короткой позиции по клиенту. 2 – клиент со стандартным уровнем риска (КСУР). 1 – клиент с повышенным уровнем риска (КПУР).
**dlong** - Ставка риска начальной маржи для КСУР лонг.  
**dshort** - Ставка риска начальной маржи для КСУР шорт.  
**dlong_min** - Ставка риска начальной маржи для КПУР лонг.  
**dshort_min** - Ставка риска начальной маржи для КПУР шорт.  

Коэффициенты маржинальной торговли появляются только на тех инструментах, которые были в [перечне ликвидного имущества](https://www.tinkoff.ru/invest/margin/equities/).

###Как узнать торгуется ли инструмент на выходных? <a id="1.13"></a>

Для отображения информации о возможности торговли инструментам по выходным добавлен флаг `weekend_flag`.

###Какие заявки по опционам возможно выставить? <a id="1.14"></a>

Торговля опционами через API в данный момент не доступна. 

###Что такое liquidity_flag? <a id="1.15"></a>

**Ликвидность** — это способность быстро продать какой-то актив по рыночной цене, то есть без скидок. Чем быстрее это можно сделать, тем выше ликвидность актива. 

Ликвидность инструмента на фондовом рынке оценивают по количеству совершаемых сделок (то есть по объему торгов) и величине спреда. **Спред** — это разница между максимальными ценами заявок на покупку и минимальными ценами заявок на продажу. Чем больше сделок и меньше разница, тем выше ликвидность.

Раз в полчаса брокер рассчитывает ликвидность по всем финансовым инструментом: 

**Для облигаций:**

liquidity = ((Среднедневная цена * current_nominal)/100) * (Дневной объем торгов)

**В остальных случаях:**

liquidity = (Среднедневная цена) * (Дневной объем торгов)

На основе значения *liqudity* для разных типов финансовых инструментов устанавливается значение флага *liquidity_flag*, который принимает для значения:

- **true** - инструмент **считается** ликвидным 
- **false** - инструмент **не считается** ликвидным